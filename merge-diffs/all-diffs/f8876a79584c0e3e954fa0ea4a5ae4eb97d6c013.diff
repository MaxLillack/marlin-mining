commit f8876a79584c0e3e954fa0ea4a5ae4eb97d6c013 (from 18fcc367d28da709cfdafef35d14861ea721def4)
Merge: 18fcc36 e06d820
Author: Bernhard Kubicek <kubicek@gmx.at>
Date:   Sun Feb 3 03:05:31 2013 -0800

    Merge pull request #376 from kintel/skip_longfilenames
    
    Also skip .files and _files with long filenames. I think its better than before. If somebody dislikes it, or wants additional configuration, it can be done in a future step. Thanks, Marius, and nice to have you helping!

diff --git a/Marlin/cardreader.cpp b/Marlin/cardreader.cpp
index 9711208..5d9494a 100644
--- a/Marlin/cardreader.cpp
+++ b/Marlin/cardreader.cpp
@@ -90,6 +90,8 @@ void  CardReader::lsDive(const char *prepend,SdFile parent)
     {
       if (p.name[0] == DIR_NAME_FREE) break;
       if (p.name[0] == DIR_NAME_DELETED || p.name[0] == '.'|| p.name[0] == '_') continue;
+      if (longFilename[0] != '\0' &&
+          (longFilename[0] == '.' || longFilename[0] == '_')) continue;
       if ( p.name[0] == '.')
       {
         if ( p.name[1] != '.')

commit f8876a79584c0e3e954fa0ea4a5ae4eb97d6c013 (from e06d820909e5512327dd125e22c7f32e4010dc49)
Merge: 18fcc36 e06d820
Author: Bernhard Kubicek <kubicek@gmx.at>
Date:   Sun Feb 3 03:05:31 2013 -0800

    Merge pull request #376 from kintel/skip_longfilenames
    
    Also skip .files and _files with long filenames. I think its better than before. If somebody dislikes it, or wants additional configuration, it can be done in a future step. Thanks, Marius, and nice to have you helping!

diff --git a/Marlin/Marlin_main.cpp b/Marlin/Marlin_main.cpp
index 473d205..39efdf4 100644
--- a/Marlin/Marlin_main.cpp
+++ b/Marlin/Marlin_main.cpp
@@ -88,7 +88,7 @@
 // M29  - Stop SD write
 // M30  - Delete file from SD (M30 filename.g)
 // M31  - Output time since last M109 or SD card start to serial
-// M42  - Change pin status via gcode
+// M42  - Change pin status via gcode Use M42 Px Sy to set pin x to value y, when omitting Px the onboard led will be used.
 // M80  - Turn on Power Supply
 // M81  - Turn off Power Supply
 // M82  - Set E codes absolute (default)
diff --git a/Marlin/pins.h b/Marlin/pins.h
index 1bbc65d..41aae2e 100644
--- a/Marlin/pins.h
+++ b/Marlin/pins.h
@@ -683,7 +683,7 @@
 #endif
 
 #ifdef MELZI
-#define LED_PIN            28
+#define LED_PIN            27 /* On some broken versions of the Sanguino libraries the pin definitions are wrong, which then needs LED_PIN as pin 28. But you better upgrade your Sanguino libraries! See #368. */
 #define FAN_PIN            4
 #endif
 
diff --git a/Marlin/ultralcd.cpp b/Marlin/ultralcd.cpp
index eb2660b..6176136 100644
--- a/Marlin/ultralcd.cpp
+++ b/Marlin/ultralcd.cpp
@@ -5,6 +5,7 @@
 #include "language.h"
 #include "cardreader.h"
 #include "temperature.h"
+#include "stepper.h"
 #include "ConfigurationStore.h"
 
 /* Configuration settings */

